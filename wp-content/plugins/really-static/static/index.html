<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>PrimeGap | Web, Smart and Mobile Development</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
		<!--[if lt IE 9]>
	<script src="/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="PrimeGap &raquo; Feed" href="/wp-content/plugins/really-static/static/feed/" />

<link rel='stylesheet' id='twentythirteen-fonts-css'  href='//fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic%7CBitter%3A400%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='/wp-content/themes/twentythirteen/fonts/genericons.css?ver=2.09' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-style-css'  href='/wp-content/themes/twentythirteen/style.css?ver=2013-07-18' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://primegap.net/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://primegap.net/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<meta name="generator" content="WordPress 3.6.1 - really-static 0.5" />
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-18862123-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://146.185.141.217/wp-content/uploads/2011/02/cropped-bokeh-fullscreen1.jpg) no-repeat scroll top;
			background-size: 1600px auto;
		}
			.site-title,
		.site-description {
			color: #ffffff;
		}
		</style>
	<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="home blog">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="/wp-content/plugins/really-static/static/" title="PrimeGap" rel="home">
				<h1 class="site-title">PrimeGap</h1>
				<h2 class="site-description">Web, Smart and Mobile Development</h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<h3 class="menu-toggle">Menu</h3>
					<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
					<div class="menu-home-menu-container"><ul id="menu-home-menu" class="nav-menu"><li id="menu-item-330" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-330"><a href="http://primegap.net/">Home</a></li>
<li id="menu-item-329" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-329"><a href="/wp-content/plugins/really-static/static/projects/">Projects</a></li>
<li id="menu-item-331" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-331"><a href="/wp-content/plugins/really-static/static/category/tutorial/">Tutorials</a></li>
<li id="menu-item-328" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-328"><a href="/wp-content/plugins/really-static/static/about/">About</a></li>
</ul></div>					<form role="search" method="get" class="search-form" action="/wp-content/plugins/really-static/static/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">


<article id="post-231" class="post-231 post type-post status-publish format-standard hentry category-tutorial">
	<header class="entry-header">

				<h1 class="entry-title">
			<a href="/wp-content/plugins/really-static/static/2011/10/20/noisegen-generate-background-noise-with-jquer/" rel="bookmark">NoiseGen, generate background noise with jQuery</a>
		</h1>

		<div class="entry-meta">
			<span class="date"><a href="/wp-content/plugins/really-static/static/2011/10/20/noisegen-generate-background-noise-with-jquer/" title="Permalink to NoiseGen, generate background noise with jQuery" rel="bookmark"><time class="entry-date" datetime="2011-10-20T23:24:07+00:00">October 20, 2011</time></a></span><span class="categories-links"><a href="/wp-content/plugins/really-static/static/category/tutorial/" title="View all posts in Tutorial" rel="category tag">Tutorial</a></span><span class="author vcard"><a class="url fn n" href="/wp-content/plugins/really-static/static/author/lucaongaro/" title="View all posts by Luca Ongaro" rel="author">Luca Ongaro</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Adding a subtle background noise to Web pages is becoming a design trend: it produces a nice old-skool &#8220;analog&#8221; look that feels more like the &#8220;real world&#8221;. Neat examples are <a href="http://forrst.com/">Forrst.com</a> or <a href="http://stripe.com/">Stripe.com</a>, as well as many UI elements in iOS5.</p>
<div id="attachment_234" class="wp-caption aligncenter" style="width: 326px"><a href="http://www.lucaongaro.eu/demos/noisegen/" target="_blank"><img src="/wp-content/uploads/2013/10/Screen-Shot-2011-10-21-at-12.09.28-AM-300x78.png" alt="Screen-Shot-2011-10-21-at-12.09.28-AM" width="300" height="78" class="alignnone size-medium wp-image-335" /></a><p class="wp-caption-text">Click the image to see a demo of NoiseGen, the jQuery plugin discussed later in this article</p></div>
<p>The usual way to achieve the effect is to use an image editing software to produce a PNG image and then set it as the background-image through CSS. Still, this approach has some drawbacks. First of all, the image has its bandwidth footprint. Moreover, fine-tuning background noise during development can be very time consuming, having to come back to the image editing software to save a new image each time you want to adjust the effect. Luckily, there&#8217;s a solution: using JavaScript and the HTML5 canvas element to dynamically produce a background image.</p>
<p>The idea is simple: create a canvas element, paint it with noise, and then set it as the background-image through CSS.</p>
<pre class="brush: jscript; title: ; notranslate" title="">

// Create the canvas
var canvas = document.createElement(&quot;canvas&quot;);
canvas.width = 80;
canvas.height = 80;
var context = canvas.getContext(&quot;2d&quot;), x, y, opacity = 0.2;

// Paint it with random noise
for (x=0; x &lt; canvas.width; x++) {
  for (y=0; y &lt; canvas.height; y++) {
    var rand = Math.floor(Math.random() * 60);
    context.fillStyle = &quot;rgba(&quot;+rand+&quot;,&quot;+rand+&quot;,&quot;+rand+&quot;,&quot;+opacity+&quot;)&quot;;
    context.fillRect(x, y, 1, 1);
  }
}

// Use it as the CSS background-image (here we are assuming jQuery is imported)
$(&quot;body&quot;).css(&quot;background-image&quot;, &quot;url(&quot; + canvas.toDataURL(&quot;image/png&quot;) + &quot;)&quot;);
</pre>
<p>Unfortunately, some browsers do not support the canvas element yet (guess who?), so we need to provide for a graceful fallback. Also, it would be cool to have the possibility to finely tweak parameters like opacity, dimension of the image, size of the noise grains, statistical distribution of noise, colors, etc&#8230;</p>
<p>Luckily, we&#8217;ve got you covered! <a title="NoiseGen" href="https://github.com/lucaong/noiseGen" target="_blank">NoiseGen</a> is an open-source jQuery plugin that does exactly that, offering support for a fallback image for <del>crappy</del> old browsers and many useful configuration options. Using it is straightforward:</p>
<pre class="brush: jscript; title: ; notranslate" title="">

$(document).ready({
  $(&quot;body&quot;).noiseGen({ fallbackImage: &quot;bkgnd.png&quot; });
});

</pre>
<p>Here we&#8217;re adding background noise to the body element. Cool browsers will do that dynamically on the client side, while old browsers can rely on the bandwidth hungry image. Moreover, we can finely tweak the look of our background:</p>
<pre class="brush: jscript; title: ; notranslate" title="">

$(&quot;body&quot;).noiseGen({
  fallbackImage: &quot;bkgnd.png&quot;,
  opacity: 0.7,
  width: 64,
  height: 64,
  grainDimension: {
    width: 5,
    height: 1
  },
  fromColor: &quot;0099CC&quot;,
  toColor: &quot;10AADD&quot;,
  independentChannels: true,
  distribution: &quot;uniform&quot;,
  bias: 5
});

</pre>
<p>Do you want to give noiseGen a try? There&#8217;s a <a title="NoiseGen demo" href="http://www.lucaongaro.eu/demos/noisegen/">demo here</a>, and you can read more documentation on the <a title="GitHub noiseGen" href="https://github.com/lucaong/noiseGen">GitHub project page</a>, where you can also fork the code and contribute if you want.</p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
					<div class="comments-link">
				<a href="/wp-content/plugins/really-static/static/2011/10/20/noisegen-generate-background-noise-with-jquer/#comments" title="Comment on NoiseGen, generate background noise with jQuery"><span class="dsq-postid" data-dsqidentifier="231 http://primegap.net/?p=231">View all 2 comments</span></a>			</div><!-- .comments-link -->

			</footer><!-- .entry-meta -->
</article><!-- #post -->

<article id="post-160" class="post-160 post type-post status-publish format-standard hentry category-tutorial tag-objectspace tag-rails tag-ruby tag-savon tag-soap">
	<header class="entry-header">

				<h1 class="entry-title">
			<a href="/wp-content/plugins/really-static/static/2011/08/12/birth-and-death-of-an-object-in-ruby/" rel="bookmark">Birth and death of an object in Ruby</a>
		</h1>

		<div class="entry-meta">
			<span class="date"><a href="/wp-content/plugins/really-static/static/2011/08/12/birth-and-death-of-an-object-in-ruby/" title="Permalink to Birth and death of an object in Ruby" rel="bookmark"><time class="entry-date" datetime="2011-08-12T09:00:33+00:00">August 12, 2011</time></a></span><span class="categories-links"><a href="/wp-content/plugins/really-static/static/category/tutorial/" title="View all posts in Tutorial" rel="category tag">Tutorial</a></span><span class="tags-links"><a href="/wp-content/plugins/really-static/static/tag/objectspace/" rel="tag">ObjectSpace</a>, <a href="/wp-content/plugins/really-static/static/tag/rails/" rel="tag">Rails</a>, <a href="/wp-content/plugins/really-static/static/tag/ruby/" rel="tag">Ruby</a>, <a href="/wp-content/plugins/really-static/static/tag/savon/" rel="tag">Savon</a>, <a href="/wp-content/plugins/really-static/static/tag/soap/" rel="tag">SOAP</a></span><span class="author vcard"><a class="url fn n" href="/wp-content/plugins/really-static/static/author/andreamostosi/" title="View all posts by Andrea Mostosi" rel="author">Andrea Mostosi</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Last week I played with a SOAP API with <a href="http://savonrb.com"><code>savon.rb</code></a> to develop a newsletter system. </p>
<p>This API require authentication with a two-way handshake. At first you send a login, a password and a key and it gave you back a token. When you ended operation you should send a &#8220;close connection&#8221; command.</p>
<p>This is a popular way but when you use it in a model seems a bit tricky so I decided to hide this method inside a custom class.</p>
<p>First I create <code>ApiWrapper</code> class that wrap SOAP operation:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
class ApiWrapper

  def initialize
    @client = Savon::Client.new APP_CONFIG[:wsdl]
  end

  def open_connection
    response = do_soap_request(&quot;openApiConnection&quot;, {
      :login =&gt; APP_CONFIG[:login],
      :pwd =&gt; APP_CONFIG[:pwd],
      :key =&gt; APP_CONFIG[:key]
    })
    @token = response[:token]
  end

  def close_connection
    response = do_soap_request(&quot;closeApiConnection&quot;, {
      :token =&gt; @token
    })
  end

  def do_soap_request(method, arguments)
    response = @client.request(:api, method) do
      soap.body = arguments
    end
    response.to_hash
  end

end
</pre>
<p>Then use the <code>ApiWrapper</code> object inside the model:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
class Newsletter

  def initialize
    @api = ApiWrapper.new
  end

  def send
    # do something
  end

end
</pre>
<p>Now we can use the <code>@api</code> object for communicate with the API. I want to hide the authentication process, <strong>first attempt can be to incapsulate operation inside each method</strong>:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
def send
  @api.open_connection
  @api.do_soap_request(&quot;send&quot;, arguments)
  @api.close_connection
end
</pre>
<p>It works but the webservice il very slow, opening and closing connection require about 20 seconds and for hundred operation is too much time.</p>
<p><strong>Another way is to encapsulate authentication process inside object initialization and finalization</strong>. For this we need something similar to a C++ constructor and destructor method. Ruby has got the <code>initialize</code> method similar to constructor but it does not have a standard destructor. Luckily we can emulate it.</p>
<p>The <a href="http://ruby-doc.org/core/classes/ObjectSpace.html"><code>ObjectSpace</code></a> module enable you to <strong>define block that is executed when the object is destroyed</strong> using the <code>define_finalizer</code> method.</p>
<pre class="brush: ruby; title: ; notranslate" title="">
ObjectSpace.define_finalizer(self, Proc.new{@api.close_connection})
</pre>
<p>In the <code>initialize</code> method we can open the connection and define this finalizer. We can rewite the method as follow:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
def initialize
  @api = ApiWrapper.new
  @api.open_connection
  ObjectSpace.define_finalizer(self, Proc.new{@api.close_connection})
end
</pre>
<p>Now we can use the object with easier and more efficient connection management.</p>
<pre class="brush: ruby; title: ; notranslate" title="">
&gt; n = Newsletter.new # implicit connection open
&gt; n.send # connection is still open
&gt; n.send # connection is still open
&gt; n.send # connection is still open
&gt; quit # implicit connection close
</pre>
<p>These methods are very useful (also) to mask unnecessary complexity and make the data access more readable.</p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
					<div class="comments-link">
				<a href="/wp-content/plugins/really-static/static/2011/08/12/birth-and-death-of-an-object-in-ruby/#comments" title="Comment on Birth and death of an object in Ruby"><span class="dsq-postid" data-dsqidentifier="160 http://primegap.net/?p=160">View all 2 comments</span></a>			</div><!-- .comments-link -->

			</footer><!-- .entry-meta -->
</article><!-- #post -->

<article id="post-86" class="post-86 post type-post status-publish format-standard hentry category-tutorial tag-android tag-appcelerator tag-iphone tag-mvc">
	<header class="entry-header">

				<h1 class="entry-title">
			<a href="/wp-content/plugins/really-static/static/2011/08/05/mvc-implementation-for-appcelerator-part-4-model-and-db/" rel="bookmark">An MVC implementation for Appcelerator &#8211; Part 4: Model and DB</a>
		</h1>

		<div class="entry-meta">
			<span class="date"><a href="/wp-content/plugins/really-static/static/2011/08/05/mvc-implementation-for-appcelerator-part-4-model-and-db/" title="Permalink to An MVC implementation for Appcelerator &#8211; Part 4: Model and DB" rel="bookmark"><time class="entry-date" datetime="2011-08-05T09:55:37+00:00">August 5, 2011</time></a></span><span class="categories-links"><a href="/wp-content/plugins/really-static/static/category/tutorial/" title="View all posts in Tutorial" rel="category tag">Tutorial</a></span><span class="tags-links"><a href="/wp-content/plugins/really-static/static/tag/android/" rel="tag">Android</a>, <a href="/wp-content/plugins/really-static/static/tag/appcelerator/" rel="tag">Appcelerator</a>, <a href="/wp-content/plugins/really-static/static/tag/iphone/" rel="tag">iPhone</a>, <a href="/wp-content/plugins/really-static/static/tag/mvc/" rel="tag">MVC</a></span><span class="author vcard"><a class="url fn n" href="/wp-content/plugins/really-static/static/author/andreamostosi/" title="View all posts by Andrea Mostosi" rel="author">Andrea Mostosi</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>In <a href="http://primegap.net/2011/07/28/mvc-implementation-appcelerator-part-3-simple-demo/">part 3</a> we setup a simple app based on <a href="http://www.fabiobarbieri.it">Fabio Barbieri</a>&#8216;s evolution of <strong><a href="https://github.com/bswatson/Appcelerator-on-Rails" title="Appcelerator on Rails on GitHub">Appcelerator on Rails</a></strong>. Now is time to start playing with some models and data.</p>
<p>The application had two controllers: Products and Clients. We added to the Products controller a function that shows a static message when we click on the button. Now we want to fetch the data to display from the database.</p>
<p>First create the &#8220;Client&#8221; model:</p>
<pre class="brush: bash; title: ; notranslate" title="">
ruby scripts/generate.rb model Client name:string
Resources/models/client.js
Resources/db/migrations/20110721190738.js
</pre>
<p><code>Resources/models/client.js</code></p>
<pre class="brush: jscript; title: ; notranslate" title="">
var Client = Model.extend({
    table_name: &quot;clients&quot;,
    _fields: {id: Number, name : String},

    find: function(id) {
        var model = new Client(this.db, this._find(id));
        return model;
    },

    item_from: function(row) {
        var model = new Client(this.db, this._item_from(row));
        return model;
    }
});
</pre>
<p><code>Resources/db/migrations/20110721190738.js</code></p>
<pre class="brush: jscript; title: ; notranslate" title="">
migrate(&quot;20110721190738&quot;, &quot;CREATE TABLE IF NOT EXISTS clients (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name STRING)&quot;);
</pre>
<p>Each time we start the application, the closure in <code>db.js</code> run the migrations not already executed. We can run the app to create the table then add some fake data with a SQLite manager. Alternatively we can create another migration to add sample data, it&#8217;s up to you.</p>
<p>Create <code>Resources/db/migrations/20110721190739.js</code> (one unit after previous migration) and write:</p>
<pre class="brush: jscript; title: ; notranslate" title="">
migrate(&quot;20110721190739&quot;, &quot;INSERT INTO clients (name) VALUES ('John Doe')&quot;);
migrate(&quot;20110721190740&quot;, &quot;INSERT INTO clients (name) VALUES ('Jane Doe')&quot;);
</pre>
<p>When you start the app this migration will insert into &#8220;clients&#8221; table two items.</p>
<p>Finally add a function to the Clients controller to load the data and display them on an alert box:</p>
<pre class="brush: jscript; title: ; notranslate" title="">
loadClients: function() {
	var c = new Client(db);
	var recs = c.find_all();
	var results = &quot;Clients:n&quot;;
	if(recs.length &amp;gt; 0)
	{
		for(var i = 0; i &amp;lt; recs.length; i++)
		{
			results += recs[i].name + 'n';
		}
	}
	else
	{
		results += &quot;none&quot;;
	}
	alert(results);
}
</pre>
<p>And the corresponding button into the Clients view:</p>
<pre class="brush: jscript; title: ; notranslate" title="">
var button = Titanium.UI.createButton({
	title:'Click me',
	font:{fontSize:12,fontWeight:'bold'},
	width:65,
	height:30,
	top:300
});
button.addEventListener('click', this.controller.loadClients);
this.win.add(button);
</pre>
<p>Launch the simulator and switch to the &#8220;Client&#8221; tab. When you click on the button the client list will be showed.</p>
<p><a href="http://primegap.s3.amazonaws.com/wp-content/uploads/2011/07/mvcsample2.jpg"><img src="http://primegap.s3.amazonaws.com/wp-content/uploads/2011/07/mvcsample2.jpg" alt="" width="399" height="375" class="alignnone size-full wp-image-137" /></a></p>
<p>You can download the <a href="https://s3.amazonaws.com/primegap-misc/mvcsample2.zip">sample code</a> and look use it for your projects.</p>
<p>With this fourth part we conclude this series of tutorials. It&#8217;s not too much, just a start but we are planning to create a new series of tutorials in september that will cover the coding of a complete application with Appcelerator on Rails.</p>
<p>Enjoy and have a good summer vacation!</p>
<p>Links:<br />
Part 1: <a href="http://primegap.net/2011/05/31/an-mvc-implementation-for-appcelerator-part-1/" title="Part 1">Introduction</a><br />
Part 2: <a href="http://primegap.net/2011/07/20/mvc-implementation-appcelerator-part-2-improvements/" title="Part 2">Improvements</a><br />
Part 3: <a href="http://primegap.net/2011/07/28/mvc-implementation-appcelerator-part-3-simple-demo/" title="Part 3">A simple demo</a></p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
					<div class="comments-link">
				<a href="/wp-content/plugins/really-static/static/2011/08/05/mvc-implementation-for-appcelerator-part-4-model-and-db/#comments" title="Comment on An MVC implementation for Appcelerator &#8211; Part 4: Model and DB"><span class="dsq-postid" data-dsqidentifier="86 http://primegap.net/?p=86">View all 5 comments</span></a>			</div><!-- .comments-link -->

			</footer><!-- .entry-meta -->
</article><!-- #post -->

<article id="post-82" class="post-82 post type-post status-publish format-standard hentry category-tutorial tag-android tag-appcelerator tag-iphone tag-mvc">
	<header class="entry-header">

				<h1 class="entry-title">
			<a href="/wp-content/plugins/really-static/static/2011/07/28/mvc-implementation-appcelerator-part-3-simple-demo/" rel="bookmark">An MVC implementation for Appcelerator – Part 3: A simple demo</a>
		</h1>

		<div class="entry-meta">
			<span class="date"><a href="/wp-content/plugins/really-static/static/2011/07/28/mvc-implementation-appcelerator-part-3-simple-demo/" title="Permalink to An MVC implementation for Appcelerator – Part 3: A simple demo" rel="bookmark"><time class="entry-date" datetime="2011-07-28T14:52:20+00:00">July 28, 2011</time></a></span><span class="categories-links"><a href="/wp-content/plugins/really-static/static/category/tutorial/" title="View all posts in Tutorial" rel="category tag">Tutorial</a></span><span class="tags-links"><a href="/wp-content/plugins/really-static/static/tag/android/" rel="tag">Android</a>, <a href="/wp-content/plugins/really-static/static/tag/appcelerator/" rel="tag">Appcelerator</a>, <a href="/wp-content/plugins/really-static/static/tag/iphone/" rel="tag">iPhone</a>, <a href="/wp-content/plugins/really-static/static/tag/mvc/" rel="tag">MVC</a></span><span class="author vcard"><a class="url fn n" href="/wp-content/plugins/really-static/static/author/andreamostosi/" title="View all posts by Andrea Mostosi" rel="author">Andrea Mostosi</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>In <a href="http://primegap.net/2011/07/20/mvc-implementation-appcelerator-part-2-improvements/">part 2</a> we learned how to improve a standard distribution of <strong><a href="https://github.com/bswatson/Appcelerator-on-Rails" title="Appcelerator on Rails on GitHub">Appcelerator on Rails</a></strong>. Now we will see it in action.</p>
<p>We are going to create a small application with 2 empty tab, with a very simple logic, that at the end will look like this.</p>
<p><a href="http://primegap.s3.amazonaws.com/wp-content/uploads/2011/07/mvcsample1.jpg"><img src="http://primegap.s3.amazonaws.com/wp-content/uploads/2011/07/mvcsample1.jpg" alt="" width="600" height="375" class="alignnone size-full wp-image-107" /></a></p>
<p>First create the controllers and the views. We need the <code>ruby</code> interpreter (version 1.8.7) in ordert to run the generators. If you have no Ruby interpreter installed on your system, you can find one <a href="http://www.ruby-lang.org/en/">here</a>.</p>
<p>First controller:</p>
<pre class="brush: bash; title: ; notranslate" title="">
ruby scripts/generate.rb controller Products
Resources/controllers/products.js
Resources/views/products.js
</pre>
<p>Generated code:<br />
<code>Resources/controllers/products.js</code></p>
<pre class="brush: jscript; title: ; notranslate" title="">
Ti.include(&quot;/views/products.js&quot;);
var ProductController = Controller.extend({
    init: function(win) {
        this._super(win);

        this.view = new ProductView(win, this);
    }
});
</pre>
<p><code>Resources/views/products.js</code></p>
<pre class="brush: jscript; title: ; notranslate" title="">
var ProductView = View.extend({
    init: function(win, controller) {
        this._super(win, controller);

        this.layout();
    },
    layout: function() {

    }
});
</pre>
<p>Second controller:</p>
<pre class="brush: bash; title: ; notranslate" title="">
ruby scripts/generate.rb controller Clients
Resources/controllers/clients.js
Resources/views/clients.js
</pre>
<p>Now add some (simple) logic to the first controller:</p>
<pre class="brush: jscript; title: ; notranslate" title="">
btnClicked: function(event) {
	alert(&quot;click&quot;);
}
</pre>
<p>and write code that builds the interface using th controller logic:</p>
<pre class="brush: jscript; title: ; notranslate" title="">
layout: function() {
	this.win.title = 'Products';
	this.win.backgroundColor = '#fff';

	var label = Titanium.UI.createLabel({
		color:'#999',
		text:'I am Products Window',
		font:{fontSize:20,fontFamily:'Helvetica Neue'},
		textAlign:'center',
		width:'auto',
	});
	this.win.add(label);

	var button = Titanium.UI.createButton({
		title:'Click me',
		font:{fontSize:12,fontWeight:'bold'},
		width:65,
		height:30,
		top:300
	});
	button.addEventListener('click', this.controller.btnClicked);
	this.win.add(button);
}
</pre>
<p>You can made the same operation on the other controller and view.</p>
<p>In the <code>app.js</code> file we only setup properties, create tabs and instantiate controllers. Nothing more.</p>
<pre class="brush: jscript; title: ; notranslate" title="">
Titanium.UI.setBackgroundColor('#000');
var tabGroup = Titanium.UI.createTabGroup();

// Product tab (root tab)
var productWin = Ti.UI.createWindow({exitOnClose:true});
Ti.include(&quot;/controllers/products.js&quot;);
var productController = new ProductController(productWin);
var productTab = Titanium.UI.createTab({
    icon:'KS_nav_ui.png',
    title:'Products',
    window:productWin
});

// Client tab
var clientWin = Ti.UI.createWindow({exitOnClose:true});
Ti.include(&quot;/controllers/clients.js&quot;);
var clientController = new ClientController(clientWin);
var clientTab = Titanium.UI.createTab({
    icon:'KS_nav_views.png',
    title:'Clients',
    window:clientWin
});

tabGroup.addTab(productTab);
tabGroup.addTab(clientTab);
tabGroup.open();
</pre>
<p>Now we can launch the emulator and enjoy our new MVC-based project.</p>
<p>You can download the <a href="https://s3.amazonaws.com/primegap-misc/mvcsample1.zip">sample code</a> wrote and packed by <a href="http://www.fabiobarbieri.it">Fabio Barbieri</a>.</p>
<p>Links:<br />
Part 1: <a href="http://primegap.net/2011/05/31/an-mvc-implementation-for-appcelerator-part-1/" title="Part 1">Introduction</a><br />
Part 2: <a href="http://primegap.net/2011/07/20/mvc-implementation-appcelerator-part-2-improvements/" title="Part 2">Improvements</a><br />
Part 4: <a href="http://primegap.net/2011/08/05/mvc-implementation-for-appcelerator-part-4-model-and-db/" title="Part 4">Model and DB</a></p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
					<div class="comments-link">
				<a href="/wp-content/plugins/really-static/static/2011/07/28/mvc-implementation-appcelerator-part-3-simple-demo/#comments" title="Comment on An MVC implementation for Appcelerator – Part 3: A simple demo"><span class="dsq-postid" data-dsqidentifier="82 http://primegap.net/?p=82">View all 4 comments</span></a>			</div><!-- .comments-link -->

			</footer><!-- .entry-meta -->
</article><!-- #post -->

<article id="post-44" class="post-44 post type-post status-publish format-standard hentry category-tutorial tag-android tag-appcelerator tag-iphone tag-mvc">
	<header class="entry-header">

				<h1 class="entry-title">
			<a href="/wp-content/plugins/really-static/static/2011/07/20/mvc-implementation-appcelerator-part-2-improvements/" rel="bookmark">An MVC implementation for Appcelerator &#8211; Part 2: Improvements</a>
		</h1>

		<div class="entry-meta">
			<span class="date"><a href="/wp-content/plugins/really-static/static/2011/07/20/mvc-implementation-appcelerator-part-2-improvements/" title="Permalink to An MVC implementation for Appcelerator &#8211; Part 2: Improvements" rel="bookmark"><time class="entry-date" datetime="2011-07-20T10:48:32+00:00">July 20, 2011</time></a></span><span class="categories-links"><a href="/wp-content/plugins/really-static/static/category/tutorial/" title="View all posts in Tutorial" rel="category tag">Tutorial</a></span><span class="tags-links"><a href="/wp-content/plugins/really-static/static/tag/android/" rel="tag">Android</a>, <a href="/wp-content/plugins/really-static/static/tag/appcelerator/" rel="tag">Appcelerator</a>, <a href="/wp-content/plugins/really-static/static/tag/iphone/" rel="tag">iPhone</a>, <a href="/wp-content/plugins/really-static/static/tag/mvc/" rel="tag">MVC</a></span><span class="author vcard"><a class="url fn n" href="/wp-content/plugins/really-static/static/author/andreamostosi/" title="View all posts by Andrea Mostosi" rel="author">Andrea Mostosi</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Hi again, in this four parts tutorial I will present some ideas and projects to implement a MVC framework for Appcelerator Titanium, a multiplatform (iOS and Android) Javascript framework to build native mobile apps.</p>
<p>In <a href="http://primegap.net/2011/05/31/an-mvc-implementation-for-appcelerator-part-1/" title="Part 1">part 1</a> we discovered the structure of <strong><a href="https://github.com/bswatson/Appcelerator-on-Rails" title="Appcelerator on Rails on GitHub">Appcelerator on Rails</a></strong>. It&#8217;s a quite well designed framework, the basic ideas are good but there are several limitations. The first problem comes from the implementation of the controller.</p>
<pre class="brush: jscript; title: ; notranslate" title="">
var MainController = Controller.extend({
    init: function(win) {
        this._super(win);
        this.view = new MainView(win, this);
    }
});

(function() {
    var win = Titanium.UI.currentWindow;
    new MainController(win);
})();
</pre>
<p>The closure at the end of this class instantiates the controller only when you include the file. <strong>If you want to instantiate one more, you must include the class file again and this isn&#8217;t good from a coding perspective.</strong> A better implementation would split definition and instantiation.</p>
<p>Controller file can be more compact:</p>
<pre class="brush: jscript; title: ; notranslate" title="">
var MainController = Controller.extend({
    init: function(win) {
        this._super(win);
        this.view = new MainView(win, this);
    }
});
</pre>
<p>In this way, when you use the class include file once and it will instantiate the controller every time you need it.</p>
<pre class="brush: jscript; title: ; notranslate" title="">
Ti.include(&quot;/controllers/main.js&quot;);
var mainController = new MainController(mainWin);
</pre>
<p>This, as well as having potential advantages in terms of memory usage, it&#8217;s more rational too.</p>
<p>Another advantage is the ability to <strong>access global variables inside the controllers and views</strong> without weird tricks, something not previously allowed.</p>
<p>These were functional improvements: <strong>another improvement is to clean the included code</strong>. The Appcelerator on Rails&#8217; library files are full of code that is no longer used. As well as increasing the size and memory usage it also generates a long series of warnings that complicates debugging. Cleaning and tidying these files is a necessary work.</p>
<p><a href="http://www.fabiobarbieri.it" title="Fabio Barbieri">Fabio Barbieri</a>, the developer behind these improvements, has made ​​a preliminary sample of the code, cleaned and fixed, that can be downloaded <a href="https://s3.amazonaws.com/primegap-misc/mvcsample.zip">here</a>.</p>
<p>That&#8217;s all for part 2. In the next part I will present how to build a simple app starting from these considerations.</p>
<p>Links:<br />
Part 1: <a href="http://primegap.net/2011/05/31/an-mvc-implementation-for-appcelerator-part-1/" title="Part 1">Introduction</a><br />
Part 3: <a href="http://primegap.net/2011/07/28/mvc-implementation-appcelerator-part-3-simple-demo/" title="Part 3">A simple demo</a><br />
Part 4: <a href="http://primegap.net/2011/08/05/mvc-implementation-for-appcelerator-part-4-model-and-db/" title="Part 4">Model and DB</a></p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
					<div class="comments-link">
				<a href="/wp-content/plugins/really-static/static/2011/07/20/mvc-implementation-appcelerator-part-2-improvements/#comments" title="Comment on An MVC implementation for Appcelerator &#8211; Part 2: Improvements"><span class="dsq-postid" data-dsqidentifier="44 http://primegap.net/?p=44">One comment so far</span></a>			</div><!-- .comments-link -->

			</footer><!-- .entry-meta -->
</article><!-- #post -->

				<nav class="navigation paging-navigation" role="navigation">
		<h1 class="screen-reader-text">Posts navigation</h1>
		<div class="nav-links">

						<div class="nav-previous"><a href="/wp-content/plugins/really-static/static/page/2/index.html" ><span class="meta-nav">&larr;</span> Older posts</a></div>


		</div><!-- .nav-links -->
	</nav><!-- .navigation -->


		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
				<div id="secondary" class="sidebar-container" role="complementary">
		<div class="widget-area">
			<aside id="text-2" class="widget widget_text"><h3 class="widget-title">About</h3>			<div class="textwidget"><p><a href="http://andreamostosi.name">Andrea Mostosi</a> lives in Bergamo and works in Milano, Italy<br />
<a href="http://lucaongaro.eu">Luca Ongaro</a> and <a href="http://lucatironi.net">Luca Tironi</a> live and work in Berlin, Germany.</p>
<p>They are geeks and proud nerds. They believe in the power of knowledge and the Force.</p>
</div>
		</aside><aside id="text-3" class="widget widget_text"><h3 class="widget-title">Twitter</h3>			<div class="textwidget"><p>You should follow us on <a href="http://twitter.com/primegap">Twitter</a></p>
<p><a href="http://twitter.com/lucaongaro">@lucaongaro</a><br />
<a href="http://twitter.com/lucatironi">@lucatironi</a><br />
<a href="http://twitter.com/zenkay">@zenkay</a></p>
</div>
		</aside><aside id="nav_menu-2" class="widget widget_nav_menu"><h3 class="widget-title">Menu</h3><div class="menu-home-menu-container"><ul id="menu-home-menu-1" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-330"><a href="http://primegap.net/">Home</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-329"><a href="/wp-content/plugins/really-static/static/projects/">Projects</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-331"><a href="/wp-content/plugins/really-static/static/category/tutorial/">Tutorials</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-328"><a href="/wp-content/plugins/really-static/static/about/">About</a></li>
</ul></div></aside><aside id="meta-3" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="http://primegap.net/wp-login.php">Log in</a></li>
			<li><a href="/wp-content/plugins/really-static/static/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://primegap.disqus.com/latest.rss" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</aside>		</div><!-- .widget-area -->
	</div><!-- #secondary -->

			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'primegap';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
        <script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeRDark.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['auto-links'] = false;
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['tab-size'] = 2;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.defaults['wrap-lines'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='http://primegap.net/wp-includes/js/jquery/jquery.masonry.min.js?ver=2.1.05'></script>
<script type='text/javascript' src='/wp-content/themes/twentythirteen/js/functions.js?ver=2013-07-18'></script>
</body>
</html>
